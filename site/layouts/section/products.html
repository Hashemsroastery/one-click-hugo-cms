{{ define "main" }}

{{ partial "jumbotron" (dict "imageUrl" .Params.image "title" .Title) }}

{{ if .Params.navigation_panel }}
<style>
  .nav-btn {
    background-color: #6F4E37; /* Coffee brown */
    color: white;
    border: none;
    border-radius: 4px;
    padding: 8px 12px;
    margin: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    position: relative;
    overflow: hidden;
  }
  .nav-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 10;
  }
  .nav-btn::after {
    content: attr(data-fullname);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #6F4E37;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    opacity: 0;
    transition: opacity 0.3s;
    white-space: nowrap;
    margin-bottom: 5px;
  }
  .nav-btn:hover::after {
    opacity: 1;
  }
</style>

<div class="bg-light-gray ph3 pv2 sticky top-0 z-1 shadow-1">
  <div class="mw7 center">
    <div class="flex flex-wrap justify-center">
      {{ range .Params.product_sections }}
        {{ $shortName := replace .heading "products" "" | replace "منتجات" "" | truncate 10 }}
        <button 
          onclick="event.preventDefault(); document.getElementById('{{ .heading | anchorize }}').scrollIntoView({ behavior: 'smooth' });"
          class="nav-btn f5"
          data-fullname="{{ .heading }}"
        >
          {{ $shortName }}
        </button>
      {{ end }}
    </div>
  </div>
</div>
{{ end }}

{{ range .Params.product_sections }}
  <div class="mw7 center ph3 pv3" id="{{ .heading | anchorize }}">
    <h2 class="f2 b mb3 tc">{{ .heading }}</h2>
    <div class="flex flex-wrap mhn1">
      {{ range .products }}
        <div class="w-100 w-33-ns ph2 mb4">
          <img src="{{ .image }}" alt="" class="db mb2 center br2 shadow-1" style="width:100%; max-width:450px; height:350px; object-fit:cover;">
          <p class="tc f4 lh-copy">{{ .description | safeHTML }}</p>
        </div>
      {{ end }}
    </div>
  </div>
{{ end }}

{{ end }}
